<main class="max-w-3xl mx-auto p-8">
  <%# ページヘッダー %>
  <div class="flex items-center justify-between mb-6">
    <div>
      <h1 class="text-3xl font-bold text-gray-800 mb-2">献立相談</h1>
      <p class="text-gray-600">今日のごはん、何にしますか？ 🍚</p>
    </div>
    <%= link_to "ホーム", home_path, class: "text-gray-600 hover:text-gray-800 font-medium" %>
  </div>

  <%# フォームカード %>
  <div class="bg-white rounded-2xl shadow-sm p-8">
    <%= form_with url: meal_searches_path, method: :post, local: true, class: "space-y-8", data: { controller: "meal-search-form", turbo: false } do |f| %>

      <%# 自炊 or 外食 %>
      <div>
        <label class="block text-sm font-semibold text-gray-700 mb-3">今日はどうする？</label>
        <div class="flex gap-4">
          <label class="flex-1 relative cursor-pointer">
            <%= f.radio_button :cook_context, "self_cook", class: "peer sr-only", data: { action: "change->meal-search-form#toggleMinutes" } %>
            <div class="flex items-center justify-center gap-2 px-6 py-4 bg-gray-50 peer-checked:bg-green-50 border-2 border-gray-200 peer-checked:border-green-400 rounded-xl transition-all">
              <span class="text-2xl">🍳</span>
              <span class="font-semibold text-gray-700 peer-checked:text-green-700">自炊する</span>
            </div>
          </label>
          <label class="flex-1 relative cursor-pointer">
            <%= f.radio_button :cook_context, "eat_out", class: "peer sr-only", data: { action: "change->meal-search-form#toggleMinutes" } %>
            <div class="flex items-center justify-center gap-2 px-6 py-4 bg-gray-50 peer-checked:bg-orange-50 border-2 border-gray-200 peer-checked:border-orange-400 rounded-xl transition-all">
              <span class="text-2xl">🍽️</span>
              <span class="font-semibold text-gray-700 peer-checked:text-orange-700">外で食べる</span>
            </div>
          </label>
        </div>
      </div>

      <%# 所要時間 %>
      <div data-meal-search-form-target="minutesField">
        <label class="block text-base font-bold text-gray-800 mb-3">所要時間（分）</label>
        <%= f.select :required_minutes,
                     [10, 20, 30, 45, 60],
                     { prompt: "選択してください" },
                     { class: "w-full px-4 py-3 bg-gray-50 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-400 focus:border-orange-400 focus:bg-white text-gray-900" } %>
      </div>

      <%# ジャンル %>
      <div>
        <label class="block text-base font-bold text-gray-800 mb-3">ジャンル</label>
        <%= f.collection_select :genre_id,
                                @genres,
                                :id,
                                :label,
                                { prompt: "選択してください" },
                                { class: "w-full px-4 py-3 bg-gray-50 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-400 focus:border-orange-400 focus:bg-white text-gray-900" } %>
      </div>

      <%# 気分タグ %>
      <div>
        <label class="block text-base font-bold text-gray-800 mb-3">気分</label>
        <%= f.collection_select :mood_tag_id,
                                @moods,
                                :id,
                                :label,
                                { prompt: "選択してください" },
                                { class: "w-full px-4 py-3 bg-gray-50 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-400 focus:border-orange-400 focus:bg-white text-gray-900" } %>
      </div>

      <%# 送信ボタン %>
      <div class="pt-4">
        <%= f.submit "候補を見る", class: "w-full bg-gradient-to-r from-green-500 to-green-400 text-white py-4 rounded-xl font-bold text-lg hover:from-green-600 hover:to-green-500 transition-colors shadow-md" %>
      </div>

    <% end %>
  </div>
</main>
