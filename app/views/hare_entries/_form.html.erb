<%= form_with model: hare_entry, local: true do |f| %>
  <% if hare_entry.errors.any? %>
    <div class="alert alert-error mb-4">
      <h2 class="font-bold"><%= hare_entry.errors.count %>件の入力エラーがあります</h2>
      <ul class="list-disc list-inside">
        <% hare_entry.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="form-control mb-4">
    <%= f.label :body, "内容", class: "label" %>
    <%= f.text_area :body, class: "textarea textarea-bordered w-full", rows: 5, maxlength: 280, placeholder: "今日のごはんで「ちょっと特別」だったことは？（280文字まで）" %>
  </div>

  <div class="form-control mb-4">
    <%= f.label :occurred_on, "日付", class: "label" %>
    <%= f.date_field :occurred_on, class: "input input-bordered w-full" %>
  </div>

  <% if local_assigns[:hare_tags]&.any? %>
    <div class="form-control mb-4">
      <%= f.label :hare_tag_ids, "タグ（複数選択可）", class: "label" %>
      <div class="flex flex-wrap gap-2">
        <%= f.collection_check_boxes(:hare_tag_ids, hare_tags, :id, :label) do |b| %>
          <label class="label cursor-pointer gap-2">
            <%= b.check_box(class: "checkbox checkbox-primary") %>
            <span class="label-text"><%= b.text %></span>
          </label>
        <% end %>
      </div>
    </div>
  <% end %>

  <div class="form-control mb-4">
    <%= f.label :visibility, "公開設定", class: "label" %>
    <%= f.select :visibility, HareEntry.visibilities.keys.map { |k| [I18n.t("enums.hare_entry.visibility.#{k}", default: k), k] }, {}, class: "select select-bordered w-full" %>
  </div>

  <div class="flex gap-4">
    <%= f.submit submit_label, class: "btn btn-primary" %>
    <%= link_to "キャンセル", cancel_path, class: "btn btn-ghost" %>
  </div>
<% end %>
